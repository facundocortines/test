<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sistema de Automatización | Facundo Cortines</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Fira+Code:wght@400&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* --- VARIABLES & THEME --- */
        :root {
            --bg-color: #000000;
            --card-bg: #080808;
            --text-gold: #ffedc6;      
            --text-white: #ffffff;
            --text-gray: #888888;      
            --accent-green: #00FF94;   
            
            /* EFECTOS */
            --border-light: 1px solid rgba(255, 255, 255, 0.1);
            --border-gold: 1px solid rgba(255, 237, 198, 0.2);
            --shadow-glow: 0 0 40px rgba(255, 255, 255, 0.03);
            --shadow-card: 0 10px 30px rgba(0,0,0,0.8);
        }

        html { scroll-behavior: smooth; }
        
        /* --- FIX MÓVIL: EVITAR DESPLAZAMIENTO HORIZONTAL --- */
        html, body {
            margin: 0; 
            padding: 0; 
            box-sizing: border-box;
            overflow-x: hidden; /* Clave para evitar el movimiento lateral */
            width: 100%;
            max-width: 100%;
        }

        * { box-sizing: border-box; }

        /* Corrección de ancla para scroll */
        #download, #booking {
            scroll-margin-top: 100px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-white);
            line-height: 1.6;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 2;
            width: 100%; /* Asegura ajuste en móvil */
        }

        /* --- UTILIDADES --- */
        .text-gold { color: var(--text-gold); }
        .text-center { text-align: center; }
        
        .blur-bg {
            position: absolute;
            width: 100%; /* Ajustado para no desbordar */
            max-width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(255, 237, 198, 0.03) 0%, rgba(0,0,0,0) 70%);
            top: -200px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 0;
            pointer-events: none;
        }

        /* --- BOTONES --- */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center; /* Centrado en móvil */
            gap: 10px;
            padding: 12px 28px;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-size: 0.95rem;
            z-index: 10;
            font-family: 'Poppins', sans-serif; 
        }
        
        .btn-primary {
            background-color: var(--text-gold);
            color: #000000;
            box-shadow: 0 0 20px rgba(255, 237, 198, 0.15);
        }
        .btn-primary:hover {
            background-color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(255, 237, 198, 0.4);
        }

        .btn-disabled {
            opacity: 0.6;
            cursor: not-allowed;
            filter: grayscale(1);
        }

        /* --- NAVBAR --- */
        nav {
            padding: 20px 0;
            border-bottom: var(--border-light);
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8); 
            backdrop-filter: blur(12px);
        }

        /* --- HERO SECTION --- */
        .hero {
            padding: 50px 0 40px; 
            text-align: center;
            position: relative;
        }

        .hero h1 {
            font-size: 3rem; /* Un poco más chico para móvil */
            line-height: 1.1;
            margin-bottom: 20px;
            letter-spacing: -1px;
        }
        .hero p {
            font-size: 1.1rem;
            color: var(--text-gray);
            max-width: 600px;
            margin: 0 auto 30px;
        }

        /* --- 3D SCROLL CONTAINER --- */
        .scroll-perspective-wrapper {
            min-height: 100vh; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            position: relative;
            perspective: 1000px; 
            margin-bottom: 20px;
            width: 100%;
            overflow: hidden; /* Previene scroll horizontal por rotación */
        }

        .scroll-card-3d {
            width: 90%;
            max-width: 1200px; 
            height: auto;         
            aspect-ratio: 16/9;   
            min-height: 500px;    
            background: #111;
            border: 4px solid #333;
            border-radius: 20px;
            box-shadow: 0 50px 100px -20px rgba(0,0,0,1), inset 0 0 0 2px rgba(255,255,255,0.05);
            overflow: hidden;
            position: sticky;
            top: 120px; 
            transform-style: preserve-3d;
            will-change: transform;
            display: flex;
            flex-direction: column;
        }

        .browser-header {
            height: 40px;
            background: #1a1a1a;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            padding: 0 15px;
            gap: 8px;
            flex-shrink: 0;
        }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: #333; }
        .dot.red { background: #ff4444; }
        .dot.yellow { background: #ffb800; }
        .dot.green { background: #00cc44; }

        .browser-content {
            flex: 1;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden; 
            position: relative;
        }
        
        .browser-content img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            object-position: top center; 
            opacity: 1;
        }

        /* --- COMPARISON SECTION --- */
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin: 40px 0 100px;
            align-items: stretch;
        }
        
        .glass-panel {
            background: #0a0a0a;
            padding: 40px;
            border-radius: 16px;
            border: 1px solid rgba(255, 20, 20, 0.3); 
            box-shadow: inset 0 0 20px rgba(255, 0, 0, 0.05), 0 10px 30px rgba(0,0,0,0.8); 
            opacity: 0.9; 
            transition: all 0.3s;
            position: relative;
        }
        
        .glass-panel .list-item {
            color: rgba(255, 255, 255, 0.85) !important;
        }

        .glass-panel:hover {
             transform: translateY(-5px);
             border-color: rgba(255, 20, 20, 0.5);
             box-shadow: inset 0 0 30px rgba(255, 0, 0, 0.1), 0 20px 50px rgba(0,0,0,1);
        }

        /* --- MAGIC CARD --- */
        .magic-card {
            position: relative;
            border-radius: 16px;
            padding: 1px;
            background: linear-gradient(45deg, #ffedc6 0%, rgba(255, 237, 198, 0.8) 25%, rgba(255, 237, 198, 0.5) 50%, rgba(255, 237, 198, 0.8) 75%, #ffedc6 100%);
            box-shadow: 0 0 100px -20px rgba(255, 237, 198, 0.3);
            transform: scale(1.02); 
            display: flex; 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
        }
        
        .magic-card:hover {
            transform: scale(1.02) translateY(-5px); 
            box-shadow: 0 0 120px -10px rgba(255, 237, 198, 0.5); 
        }
        
        .magic-content {
            background: #080808;
            border-radius: 15px; 
            padding: 40px;
            width: 100%;
            position: relative;
            z-index: 1;
        }

        .card-header {
            display: flex; align-items: center; gap: 12px; margin-bottom: 25px;
            font-weight: 600; font-size: 1.1rem; color: var(--text-white);
        }
        .list-item {
            display: flex; align-items: start; gap: 15px; margin-bottom: 18px;
            color: var(--text-gray); font-size: 0.95rem;
        }

        /* --- PROCESS GRID --- */
        .process-section { margin: 100px 0 40px; }
        .process-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 40px;
        }
        
        .process-card {
            background: #090909;
            border-radius: 12px;
            padding: 30px;
            position: relative;
            border: 1px solid rgba(255, 237, 198, 0.15);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            overflow: hidden;
        }
        .process-card:hover { 
            transform: translateY(-5px); 
            border-color: rgba(255, 237, 198, 0.4);
            box-shadow: 0 0 30px rgba(255, 237, 198, 0.1), inset 0 0 20px rgba(255, 237, 198, 0.05);
        }
        .process-icon { color: var(--text-gold); margin-bottom: 15px; }
        .process-title { color: var(--text-white); font-weight: 600; margin-bottom: 10px; }
        .process-desc { color: var(--text-gray); font-size: 0.9rem; }

        /* --- TESTIMONIALS SECTION --- */
        .testimonials-section {
            margin: 20px 0 40px; 
            position: relative;
            overflow: hidden;
        }
        .slider-container {
            position: relative;
            max-width: 800px; 
            margin: 0 auto;
            overflow: hidden;
        }
        .slider-track {
            display: flex;
            will-change: transform; 
        }
        .testimonial-card {
            min-width: 100%; 
            padding: 20px;
            box-sizing: border-box;
        }
        .t-content {
            background: transparent; 
            padding: 20px 0;
            border-radius: 0;
            border: none;
            position: relative;
            text-align: center;
            box-shadow: none;
        }
        .t-stars {
            color: var(--text-gold);
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            gap: 4px;
        }
        .t-title {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--text-white);
            margin-bottom: 15px;
        }
        .t-text {
            color: var(--text-gray);
            font-style: italic;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .slider-dots { display: none; }

        /* --- DOWNLOAD SECTION REESTRUCTURADA --- */
        .download-section {
            background: #050505;
            border: 1px solid #222;
            padding: 0; 
            border-radius: 20px;
            margin: 40px 0 80px; 
            overflow: hidden;
            position: relative;
        }

        .download-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 50% - 50% */
            gap: 0;
        }

        /* Contenedor de PASOS (Ahora primero en el HTML o Izquierda) */
        .download-content {
            padding: 40px 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start; 
            border-right: 1px solid #222; /* Borde a la derecha en Desktop */
        }

        /* Contenedor de IMAGEN (Ahora segundo en el HTML o Derecha) */
        .download-visual {
            background: #0a0a0a;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .download-visual img {
            width: 100%;
            height: auto;
            max-width: 400px;
            border-radius: 12px;
            border: 1px solid #333;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .download-steps {
            text-align: left;
            width: 100%;
            margin: 20px 0 30px;
        }
        .d-step {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            color: var(--text-gray);
            font-size: 0.9rem;
            align-items: flex-start;
        }
        .d-number {
            background: var(--text-gold);
            color: #000;
            font-weight: bold;
            width: 24px; height: 24px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%;
            font-size: 0.8rem;
            flex-shrink: 0;
            margin-top: 3px;
        }

        /* --- CAL.COM --- */
        .cal-section {
            min-height: 90vh;
            display: flex;
            align-items: center; 
            justify-content: center;
            padding-bottom: 40px;
        }
        .cal-wrapper { width: 100%; overflow: hidden !important; }
        #my-cal-inline-llamada-de-diagnostico::-webkit-scrollbar { display: none; }
        #my-cal-inline-llamada-de-diagnostico { -ms-overflow-style: none; scrollbar-width: none; }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.2rem; }
            .comparison, .process-grid { grid-template-columns: 1fr; }
            .download-grid { grid-template-columns: 1fr; } /* Se apilan verticalmente */
            
            /* Orden visual en móvil: Primero contenido (pasos), luego imagen */
            .download-content { 
                border-right: none; 
                border-bottom: 1px solid #222; 
                padding: 30px; 
                align-items: center; 
                text-align: center; 
            }
            .download-visual { 
                padding: 40px; 
            }
            .download-steps { text-align: left; } 
            
            .scroll-perspective-wrapper { min-height: auto; margin-bottom: 50px; }
            .scroll-card-3d { height: 300px; min-height: auto; aspect-ratio: auto; position: relative; top: 0; transform: none !important; }
            .slider-container { max-width: 100%; }
        }
    </style>
</head>
<body>

    <div class="blur-bg"></div>

    <nav>
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <div style="font-weight: 600; font-size: 1.1rem; color: var(--text-white);">
                Facundo Cortines
            </div>
            <a href="#booking" class="btn btn-primary" style="padding: 8px 20px; font-size: 0.9rem;">
                Agendar Llamada
            </a>
        </div>
    </nav>

    <div class="container">
        
        <div class="scroll-perspective-wrapper">
            <div class="hero">
                <h1>[title]</h1>
                <p>[description]</p>
                <a href="#download" class="btn btn-primary">Reclamar sistema gratuito</a>
            </div>

            <div class="scroll-card-3d" id="card3d">
                <div class="browser-header">
                    <div class="dot red"></div>
                    <div class="dot yellow"></div>
                    <div class="dot green"></div>
                    </div>
                <div class="browser-content">
                    <img src="dashboard.png" alt="Dashboard System">
                </div>
            </div>
        </div>

        <div class="text-center" style="margin-bottom: 30px; margin-top: 0px;">
            <h2>La transformación de tu negocio</h2>
        </div>

        <section class="comparison">
            <div class="glass-panel">
                <div class="card-header" style="opacity: 0.6;">
                    <i data-lucide="x" style="color: #FF4444;"></i>
                    Sin este sistema
                </div>
                <div class="list-item">
                    <i data-lucide="x-circle" size="18"></i> <span>[desventaja1]</span>
                </div>
                <div class="list-item">
                    <i data-lucide="x-circle" size="18"></i> <span>[desventaja2]</span>
                </div>
                <div class="list-item">
                    <i data-lucide="x-circle" size="18"></i> <span>[desventaja3]</span>
                </div>
            </div>

            <div class="magic-card">
                <div class="magic-content">
                    <div class="card-header text-gold">
                        <i data-lucide="check-circle-2" style="color: var(--accent-green);"></i>
                        Con este sistema
                    </div>
                    <div class="list-item">
                        <i data-lucide="zap" size="18" class="text-gold"></i> <span class="text-white">[beneficio1]</span>
                    </div>
                    <div class="list-item">
                        <i data-lucide="layout-grid" size="18" class="text-gold"></i> <span class="text-white">[beneficio2]</span>
                    </div>
                    <div class="list-item">
                        <i data-lucide="trending-up" size="18" class="text-gold"></i> <span class="text-white">[beneficio3]</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="process-section">
            <div class="text-center">
                <h2>Arquitectura del Sistema</h2>
                <p style="color: var(--text-gray); margin-top: 10px;">[descriptionFlow]</p>
            </div>
            
            <div class="process-grid">
                <div class="process-card">
                    <div class="process-icon"><i data-lucide="mouse-pointer-2" size="28"></i></div>
                    <div class="process-title">[process1]</div>
                    <div class="process-desc">[processDescription1]</div>
                </div>
                <div class="process-card">
                    <div class="process-icon"><i data-lucide="cpu" size="28"></i></div>
                    <div class="process-title">[process2]</div>
                    <div class="process-desc">[processDescription2]</div>
                </div>
                <div class="process-card">
                    <div class="process-icon"><i data-lucide="send" size="28"></i></div>
                    <div class="process-title">[process3]</div>
                    <div class="process-desc">[processDescription3]</div>
                </div>
                <div class="process-card">
                    <div class="process-icon"><i data-lucide="database" size="28"></i></div>
                    <div class="process-title">[process4]</div>
                    <div class="process-desc">[processDescription4]</div>
                </div>
                <div class="process-card">
                    <div class="process-icon"><i data-lucide="filter" size="28"></i></div>
                    <div class="process-title">[process5]</div>
                    <div class="process-desc">[processDescription5]</div>
                </div>
                <div class="process-card">
                    <div class="process-icon"><i data-lucide="check-square" size="28"></i></div>
                    <div class="process-title">[process6]</div>
                    <div class="process-desc">[processDescription6]</div>
                </div>
            </div>
        </section>

        <section class="testimonials-section">
            <div class="slider-container">
                <div class="slider-track" id="sliderTrack">
                    
                    <div class="testimonial-card">
                        <div class="t-content">
                            <div class="t-stars">
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                            </div>
                            <div class="t-title">Top-tier AI Expert</div>
                            <p class="t-text">"Facundo is one of those rare professionals who makes complex work feel effortless. His communication is clear, his execution flawless, and he remains calm and focused no matter the challenge. He doesn’t just solve problems; he dissolves them! Truly a top-tier AI automation expert. Highly recommended."</p>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <div class="t-content">
                            <div class="t-stars">
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                            </div>
                            <div class="t-title">Insanely Detailed</div>
                            <p class="t-text">"Facundo is the best automation expert I have worked with. Our team utilized him for a few N8N automations and he was quick, insanely detailed, made super easy-to-follow setup guides, and was very proactive throughout the entire process. If you are looking for someone who knows N8N very well, reach out to Facundo!"</p>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <div class="t-content">
                            <div class="t-stars">
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                            </div>
                            <div class="t-title">Excellent Team Player</div>
                            <p class="t-text">"It was a great experience working with Facundo. He's an excellent team player who quickly found a solution to a complex issue in the automation process. Facundo works efficiently and is always available when needed. Even if he doesn't have the solution right away, he remains dedicated until he finds it."</p>
                        </div>
                    </div>

                    <div class="testimonial-card">
                        <div class="t-content">
                            <div class="t-stars">
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                                <i data-lucide="star" size="18" fill="var(--text-gold)"></i>
                            </div>
                            <div class="t-title">Over Delivered</div>
                            <p class="t-text">"Wow! That's what I can say after working with Facundo. He under promised but over delivered. He added some modules to my existing blueprint that I didn't realized possible. He really knows his craft when it comes to automation and coding. You are a gem! I am a very happy client."</p>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <section id="download" class="download-section">
            <div class="download-grid">
                
                <div class="download-content">
                    <h2 style="line-height: 1.2;">Instala el Blueprint</h2>
                    <p style="margin-top: 10px; color: #888;">Sigue estos pasos para importar el sistema:</p>
                    
                    <div class="download-steps">
                        <div class="d-step">
                            <div class="d-number">1</div>
                            <div>Dale click al botón "Descargar sistema".</div>
                        </div>
                        <div class="d-step">
                            <div class="d-number">2</div>
                            <div>Crea un escenario en n8n.</div> 
                        </div>
                        <div class="d-step">
                            <div class="d-number">3</div>
                            <div>Haz click en los 3 puntos en la esquina superior derecha.</div>
                        </div>
                        <div class="d-step">
                            <div class="d-number">4</div>
                            <div>Selecciona <strong>"Import from File"</strong> y carga el archivo descargado.</div>
                        </div>
                    </div>

                    <a href="#" id="downloadBtn" class="btn btn-primary">
                        Descargar sistema
                    </a>
                </div>

                <div class="download-visual">
                    <img src="tutorial.png" alt="Tutorial de importación">
                </div>

            </div>
        </section>

        <div style="text-align: center; margin: 100px 0 60px;">
            <h2 style="margin-bottom: 20px; font-size: 2.2rem;">
                ¿Cansado de que tu negocio <span class="text-gold">siga dependiendo de ti?</span>
            </h2>
            
            <p style="max-width: 1000px; margin: 0 auto; font-size: 1.1rem; color: var(--text-gray);">
                Deja de operar y empieza a dirigir. Creamos sistemas que le permiten a tu negocio escalar sin ti mientras tu equipo ejecuta con precisión. Agenda una llamada para analizar cómo podemos aplicarlos en tu negocio.
            </p>
        </div>

        <section id="booking" class="cal-section">
            <div class="cal-wrapper">
                <div style="width:100%;height:100%;overflow:hidden !important" id="my-cal-inline-llamada-de-diagnostico"></div>
                <script type="text/javascript">
                (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
                Cal("init", "llamada-de-diagnostico", {origin:"https://app.cal.com"});
                Cal.ns["llamada-de-diagnostico"]("inline", {
                    elementOrSelector:"#my-cal-inline-llamada-de-diagnostico",
                    config: {"layout":"month_view","theme":"dark"},
                    calLink: "facundo-cortines/llamada-de-diagnostico",
                });
                Cal.ns["llamada-de-diagnostico"]("ui", {"theme":"dark","cssVarsPerTheme":{"light":{"cal-brand":"#292929"},"dark":{"cal-brand":"#ffedc6"}},"hideEventTypeDetails":false,"layout":"month_view"});
                </script>
            </div>
        </section>

    </div>

    <footer style="border-top: 1px solid #1a1a1a; padding: 40px 0; text-align: center; font-size: 0.85rem; color: #444;">
        <p>© 2025 Facundo Cortines.</p>
    </footer>

    <script>
        lucide.createIcons();

        // --- SCROLL ANIMATION (HERO) ---
        const wrapper = document.querySelector('.scroll-perspective-wrapper');
        const card = document.getElementById('card3d');
        const startRotate = 20; 
        const endRotate = 0;    
        const startScale = 1.05;
        const endScale = 1;

        function handleScroll() {
            if (window.innerWidth <= 768) return;
            const rect = wrapper.getBoundingClientRect();
            const viewportHeight = window.innerHeight;
            const start = viewportHeight * 0.2; 
            const distance = viewportHeight * 0.8; 
            
            let progress = (start - rect.top) / distance;
            if (progress < 0) progress = 0;
            if (progress > 1) progress = 1;

            const currentRotate = startRotate - (progress * (startRotate - endRotate));
            const currentScale = startScale - (progress * (startScale - endScale));
            const currentY = 0 - (progress * 50); 

            card.style.transform = `perspective(1000px) rotateX(${currentRotate}deg) scale(${currentScale}) translateY(${currentY}px)`;
        }

        window.addEventListener('scroll', () => {
            window.requestAnimationFrame(handleScroll);
        });
        handleScroll();


        // --- TESTIMONIALS SLIDER (INFINITE LOOP) ---
        const track = document.getElementById('sliderTrack');
        let slides = Array.from(track.children);
        
        const firstClone = slides[0].cloneNode(true);
        track.appendChild(firstClone);
        
        let currentSlide = 0;
        const transitionTime = 500; 
        const intervalTime = 9000; 

        function nextSlide() {
            currentSlide++;
            track.style.transition = `transform ${transitionTime}ms ease-in-out`;
            track.style.transform = `translateX(-${currentSlide * 100}%)`;

            if (currentSlide === slides.length) {
                setTimeout(() => {
                    track.style.transition = 'none';
                    currentSlide = 0;
                    track.style.transform = `translateX(0)`;
                }, transitionTime);
            }
        }

        setInterval(nextSlide, intervalTime);


        // --- AUTO-SCAN & FORCE DOWNLOAD (GITHUB API + BLOB) ---
        document.addEventListener('DOMContentLoaded', async () => {
            const downloadBtn = document.getElementById('downloadBtn');
            const dashboardImg = document.querySelector('.browser-content img');
            
            const hostname = window.location.hostname;
            const pathSegments = window.location.pathname.split('/').filter(p => p);

            if (hostname.includes('github.io') && pathSegments.length > 0) {
                const user = hostname.split('.')[0];
                const repo = pathSegments[0];
                const apiUrl = `https://api.github.com/repos/${user}/${repo}/contents/`;

                try {
                    downloadBtn.textContent = "Buscando sistema...";
                    const response = await fetch(apiUrl);
                    const data = await response.json();

                    if (Array.isArray(data)) {
                        // 1. BLUEPRINT DOWNLOAD
                        const jsonFile = data.find(file => file.name.endsWith('.json'));
                        if (jsonFile) {
                            downloadBtn.textContent = "Descargar sistema";
                            downloadBtn.addEventListener('click', async (e) => {
                                e.preventDefault();
                                downloadBtn.textContent = "Descargando...";
                                try {
                                    const rawRes = await fetch(jsonFile.download_url);
                                    const blob = await rawRes.blob();
                                    const url = window.URL.createObjectURL(blob);
                                    const a = document.createElement('a');
                                    a.href = url;
                                    a.download = jsonFile.name;
                                    document.body.appendChild(a);
                                    a.click();
                                    window.URL.revokeObjectURL(url);
                                    document.body.removeChild(a);
                                    downloadBtn.textContent = "Descargar sistema";
                                } catch (err) {
                                    console.error("Error descargando blob:", err);
                                    downloadBtn.textContent = "Error";
                                }
                            });
                        } else {
                            downloadBtn.textContent = "Error: No encontrado";
                            downloadBtn.classList.add('btn-disabled');
                        }

                        // 2. DASHBOARD IMAGE
                        const imgFile = data.find(file => 
                            (file.name.endsWith('.png') || file.name.endsWith('.jpg') || file.name.endsWith('.jpeg')) 
                            && !file.name.includes('tutorial') 
                        );

                        if (imgFile && dashboardImg) {
                            dashboardImg.src = imgFile.download_url;
                        }
                    }
                } catch (error) {
                    console.error("Error consultando GitHub API:", error);
                    downloadBtn.textContent = "Error de carga";
                }
            } else {
                // Fallback para local
                downloadBtn.href = "blueprint.json"; 
                downloadBtn.setAttribute('download', 'blueprint.json');
            }
        });
    </script>
</body>
</html>
